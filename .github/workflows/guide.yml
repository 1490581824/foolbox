name: Guide

on:
  push:
    branches:
      - master

jobs:
  vuepress:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install vuepress
      run: |
        sudo apt update && sudo apt install yarn
        sudo yarn global add vuepress
    - name: Build
      run: |
        cd guide && vuepress build --temp /tmp/
    - name: Push
      run: |
        cd guide/.vuepress/dist/ && git init && git add -A && git commit -m 'deploy'
        cd guide/.vuepress/dist/ && git push -f git@github.com:bethgelab/foolbox.git master:gh-pages
